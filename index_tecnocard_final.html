<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TECNO CARD â€” Ù…ØªØ¬Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª NFC</title>
<meta name="description" content="Ù…ØªØ¬Ø± ØªÙŠÙƒÙ†Ùˆ ÙƒØ§Ø±Ø¯ â€” Ø¨Ø·Ø§Ù‚Ø§Øª NFC Ø°ÙƒÙŠØ© Ù…Ø¹ Ø±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ø¨Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨. ØªÙˆØµÙŠÙ„ Ù„ÙƒÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª ÙˆØ§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø³ØªÙ„Ø§Ù…." />
<meta name="theme-color" content="#0b0d12" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
<meta property="og:title" content="TECNO CARD â€” Ù…ØªØ¬Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª NFC" />
<meta property="og:description" content="Ø¨Ø·Ø§Ù‚Ø§Øª NFC Ø°ÙƒÙŠØ© Ù…Ø¹ Ø±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ø¨Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨. ØªÙˆØµÙŠÙ„ Ù„ÙƒÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª ÙˆØ§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø³ØªÙ„Ø§Ù…." />
<meta property="og:type" content="website" />
<meta property="og:locale" content="ar_DZ" />
<style>
:root{
  --bg:#0b0d12; --surface:#0f141c; --ink:#e6e8ee; --muted:#9aa3b2; --line:rgba(255,255,255,.08);
  --gold:#d4af37; --gold-d:#8a6c20; --accent:#22c55e; --danger:#ef4444;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font-family:'Cairo',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink); background:radial-gradient(1200px 480px at 85% -10%, rgba(212,175,55,.10), transparent 65%), var(--bg)}
.container{width:min(1100px,96vw); margin-inline:auto; padding:20px}
header.site{display:flex; align-items:center; justify-content:space-between; gap:16px; padding-block:14px}
.brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.3px}
.brand .chip{display:grid; place-items:center; width:36px; height:36px; border-radius:12px; background:linear-gradient(180deg,#f6e9b2,var(--gold)); color:#161616; box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}
.header-cta{display:flex; gap:8px; flex-wrap:wrap}
.hbtn{display:inline-flex; align-items:center; gap:.45rem; padding:10px 12px; border-radius:10px; border:1px solid var(--line); background:#0d1219; color:var(--ink); text-decoration:none; font-weight:800}
.hbtn.whatsapp{background:linear-gradient(180deg,#34d399,#10b981); color:#061b10; border:0}
.hbtn:hover{filter:saturate(1.05)}
.hero{margin:10px 0 18px; padding:22px; background:linear-gradient(180deg,#0d1219,#0a0f15); border:1px solid var(--line); border-radius:18px}
.hero h1{margin:0 0 6px; font-size:clamp(22px,4vw,30px)}
.hero p{margin:0; color:var(--muted)}
.grid{display:grid; gap:22px}
@media (min-width:960px){ .grid{grid-template-columns:1.1fr .9fr} }
.card{background:linear-gradient(180deg,#0d1219,#0a0f15); border:1px solid var(--line); border-radius:18px; box-shadow:0 18px 70px rgba(0,0,0,.45)}
.pad{padding:18px}
/* Gallery */
.gallery .main{border-radius:14px; overflow:hidden; border:1px solid var(--line)}
.gallery .main img{display:block; width:100%; height:auto; aspect-ratio:4/3; object-fit:cover}
.thumbs{display:grid; grid-template-columns:repeat(5,1fr); gap:10px; margin-top:12px}
.thumb{border:1px solid var(--line); border-radius:10px; overflow:hidden; cursor:pointer}
.thumb img{width:100%; height:70px; object-fit:cover; display:block}
.thumb.active{outline:2px solid var(--gold)}
/* Product */
.section-title{margin:0 0 8px; font-size:1.1rem; color:var(--muted)}
.price{display:flex; gap:12px; align-items:center; margin:6px 0 12px}
.price .now{font-weight:900; font-size:1.6rem}
.price .was{color:var(--muted); text-decoration:line-through}
.badge{-webkit-font-smoothing:antialiased; display:inline-flex; align-items:center; gap:.4rem; font-weight:800; color:#161616; background:linear-gradient(180deg,#f6e9b2,var(--gold)); padding:.28rem .6rem; border-radius:999px; font-size:.9rem; box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}
.variants{display:flex; flex-wrap:wrap; gap:10px; margin:10px 0}
.vbtn{border:1px solid var(--line); background:#0d1016; color:var(--ink); padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:800}
.vbtn.active{border-color:rgba(212,175,55,.7); color:var(--gold)}
.row{display:grid; gap:12px; grid-template-columns:1fr 1fr}
.field{display:grid; gap:6px}
label{font-size:.95rem; color:var(--muted)}
input,select,textarea{background:#0f131a; color:var(--ink); border:1px solid var(--line); border-radius:10px; padding:12px}
input:focus,select:focus,textarea:focus{outline:none; border-color:rgba(212,175,55,.6)}
.qty{display:inline-flex; border:1px solid var(--line); border-radius:10px; overflow:hidden}
.qty button{all:unset; display:grid; place-items:center; width:42px; background:#0d1016; cursor:pointer}
.qty input{width:64px; text-align:center; border:0; background:#0d1016}
.buy{display:flex; gap:10px; margin-top:14px; flex-wrap:wrap}
.btn{display:inline-flex; align-items:center; gap:.55rem; padding:12px 16px; border-radius:12px; border:1px solid var(--line); background:#0c0f14; color:var(--ink); text-decoration:none; cursor:pointer; font-weight:900}
.btn.primary{background:linear-gradient(180deg,#34d399,#10b981); color:#041b10; border:0}
.btn.primary:hover{filter:saturate(1.05)}
.summary{margin-top:12px; border:1px solid var(--line); border-radius:12px; overflow:hidden}
.summary h3{margin:0; padding:12px 14px; border-bottom:1px solid var(--line); background:#0d1118; font-size:1rem}
.summary .rowx{display:flex; justify-content:space-between; padding:10px 14px; border-top:1px dashed var(--line)}
.summary .rowx.total{font-weight:900}
.footer{color:var(--muted); text-align:center; padding:18px 0; font-size:.95rem}
.toast{position:fixed; inset-inline:50%; bottom:22px; translate:-50% 0; background:#11161e; color:var(--ink); border:1px solid var(--line); padding:10px 14px; border-radius:10px; font-size:.95rem; opacity:0; pointer-events:none; transition:opacity .25s ease, transform .25s ease; transform:translate(-50%,10px); box-shadow:0 12px 30px rgba(0,0,0,.45)}
.toast.show{opacity:1; transform:translate(-50%,0)}
/* Ø²Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø®ÙÙŠ */
#adminBar{display:none; gap:8px; margin-block:10px}
#adminBar .btn{background:#121826}
#adminHint{color:var(--muted); font-size:.9rem; margin-top:6px}
</style>
</head>
<body>
  <div class="container">
    <header class="site" aria-label="Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø©">
      <div class="brand" aria-label="Ø§Ù„Ø´Ø¹Ø§Ø±"><span class="chip" aria-hidden="true"><i class="fa-solid fa-microchip"></i></span> TECNO CARD</div>
      <div class="header-cta">
        <a class="hbtn whatsapp" id="waHeader" href="#" target="_blank" rel="noopener"><i class="fa-brands fa-whatsapp"></i> ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</a>
        <a class="hbtn" href="tel:+213770984554"><i class="fa-solid fa-phone"></i> Ø¥ØªØµØ§Ù„</a>
      </div>
    </header>

    <!-- Ø´Ø±ÙŠØ· Ø¥Ø¯Ø§Ø±Ø© Ù…Ø®ÙÙŠ (Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ù…ØªØ¬Ø± ÙÙ‚Ø·) -->
    <div id="adminBar" role="region" aria-label="Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">
      <button class="btn" id="exportBtn" type="button"><i class="fa-solid fa-file-export"></i> ØªØµØ¯ÙŠØ± Ø§Ù„Ø·Ù„Ø¨Ø§Øª (CSV)</button>
      <button class="btn" id="clearBtn" type="button"><i class="fa-regular fa-trash-can"></i> Ù…Ø³Ø­ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
      <span id="adminHint">Ø§Ù„Ø·Ù„Ø¨Ø§Øª ØªÙØ­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² ÙÙ‚Ø·.</span>
    </div>

    <section class="hero" aria-label="ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ù†ØªØ¬">
      <h1>Ø¨Ø·Ø§Ù‚Ø© NFC Ø°ÙƒÙŠØ© â€” Ù„Ù…Ø³Ø© ÙˆØ­Ø¯Ø© ØªÙƒÙÙŠ!</h1>
      <p>Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ØªØªØ¨Ø¯Ù„ ÙÙŠ Ø«Ø§Ù†ÙŠØ©: Ø±Ù‚Ù…ÙƒØŒ ÙˆØ§ØªØ³Ø§Ø¨ØŒ ÙÙŠØ³Ø¨ÙˆÙƒØŒ Ø¥ÙŠÙ…ÙŠÙ„â€¦ ØªØµÙ…ÙŠÙ… Ø§Ø­ØªØ±Ø§ÙÙŠ + Ø±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±.</p>
    </section>

    <main class="grid">
      <!-- Ù…Ø¹Ø±Ø¶ ØµÙˆØ± -->
      <section class="card pad" aria-label="Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬">
        <div class="gallery">
          <div class="main"><img id="mainImg" src="" alt="Tecno Card NFC" loading="eager" width="800" height="600"></div>
          <div class="thumbs" id="thumbs" role="list"></div>
        </div>
      </section>

      <!-- Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ -->
      <section class="card pad" aria-label="Ø§Ù„Ø·Ù„Ø¨">
        <span class="badge"><i class="fa-solid fa-bolt" aria-hidden="true"></i> ØªØ®ÙÙŠØ¶ -16% Ø§Ù„ÙŠÙˆÙ…</span>
        <h2 class="section-title" style="margin-top:10px">Ø¥Ø®ØªØ± Ø§Ù„Ø®ÙŠØ§Ø±</h2>
        <div class="price"><span class="now" id="pNow">â€” DA</span><span class="was" id="pWas">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ… â€” DA</span></div>

        <div class="variants" id="variants" role="listbox" aria-label="Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬"></div>

        <form id="waForm" onsubmit="return false" autocomplete="on">
          <div class="row">
            <div class="field">
              <label for="fname">Ø§Ù„Ø¥Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
              <input id="fname" placeholder="Ø§Ù„Ø¥Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨" required />
            </div>
            <div class="field">
              <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
              <input id="phone" inputmode="tel" placeholder="Ù…Ø«Ø§Ù„: 0770 00 00 00" pattern="^0[5-7][0-9]{8}$" title="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø¬Ø²Ø§Ø¦Ø±ÙŠ ØµØ­ÙŠØ­ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 05/06/07" required />
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label for="wilaya">Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</label>
              <select id="wilaya" required>
                <option value="">Ø¥Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</option>
              </select>
            </div>
            <div class="field">
              <label>Ø§Ù„ÙƒÙ…ÙŠØ©</label>
              <div class="qty" aria-label="Ø§Ù„ÙƒÙ…ÙŠØ©">
                <button type="button" id="minus" aria-label="Ù†Ù‚Øµ">âˆ’</button>
                <input id="qty" value="1" inputmode="numeric" pattern="[0-9]*" aria-live="polite" />
                <button type="button" id="plus" aria-label="Ø²Ø¯">+</button>
              </div>
            </div>
          </div>

          <!-- ØµÙ Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© + Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù† (Ù…Ø®ÙÙŠØ©) -->
          <div class="row">
            <div class="field">
              <label for="commune">Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</label>
              <input id="commune" placeholder="Ù…Ø«Ø§Ù„" />
            </div>
            <div class="field" style="display:none">
              <label for="shipCo">Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†</label>
              <select id="shipCo">
                <option value="yalidine" selected>Yalidine</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label for="note">Ù…Ù„Ø§Ø­Ø¸Ø© (Ø¥Ø³Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©/Ø§Ù„Ù„ÙˆÙ†â€¦)</label>
            <textarea id="note" rows="3" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø±ÙŠØ¯Ù‡Ø§ Ø¨Ø§Ù„Ø£Ø³ÙˆØ¯ ÙˆØ§Ù„Ø°Ù‡Ø¨ÙŠ Ù…Ø¹ Ø¥Ø³Ù…ÙŠ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"></textarea>
          </div>

          <div class="buy">
            <a class="btn primary" id="waBtn" href="#" target="_blank" rel="noopener"><i class="fa-brands fa-whatsapp"></i> Ø§Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</a>
            <button class="btn" type="button" id="copyLink"><i class="fa-regular fa-copy"></i> Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø©</button>
          </div>

          <section class="summary" aria-label="Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨">
            <h3>Ø§Ù„Ù…Ù„Ø®Øµ</h3>
            <div class="rowx"><span><span id="sQty">1</span> Ã— <span id="sVar">â€”</span></span><span id="sCard">â€” DA</span></div>
            <div class="rowx"><span>Ø§Ù„Ø´Ø­Ù†</span><span id="sShip">â€” DA</span></div>
            <div class="rowx"><span>Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†</span><span>Yalidine</span></div>
            <div class="rowx total"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><span id="sTotal">â€” DA</span></div>
          </section>
        </form>
      </section>
    </main>

    <div class="footer">Â© <span id="year">2025</span> TECNO CARD â€” ØªÙˆØµÙŠÙ„ Ù„ÙƒÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª â€¢ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø³ØªÙ„Ø§Ù…</div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…</div>

<script type="application/json" id="storeData">
{
  "brand": "TECNO CARD",
  "owner_phone_display": "0542322792",
  "owner_phone_e164": "+213542322792",
  "whatsapp_intl": "213542322792",
  "images": [
    "https://i.postimg.cc/MTK1f5hG/NFC.jpg",
    "https://images.unsplash.com/photo-1542744173-8e7e53415bb0?q=80&w=1200&auto=format&fit=crop",
    "https://i.postimg.cc/13QB5G58/NFC2.jpg",
    "https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1200&auto=format&fit=crop",
    "https://images.unsplash.com/photo-1556157382-97eda2d62296?q=80&w=1200&auto=format&fit=crop"
  ],
  "variants": [
    {"id":"STD","name":"Standard","price":2200, "discount":300, "final":1900},
    {"id":"CUST","name":"Personalise AVEC LOGO","price":4000, "discount":500, "final":3500}
  ],
  "wilayas": [
    {"id":1,"name":"01 - Adrar","ship":1000}, {"id":2,"name":"02 - Chlef","ship":600}, {"id":3,"name":"03 - Laghouat","ship":700},
    {"id":4,"name":"04 - Oum El Bouaghi","ship":500}, {"id":5,"name":"05 - Batna","ship":500}, {"id":6,"name":"06 - BÃ©jaÃ¯a","ship":500},
    {"id":7,"name":"07 - Biskra","ship":600}, {"id":8,"name":"08 - BÃ©char","ship":600}, {"id":9,"name":"09 - Blida","ship":600},
    {"id":10,"name":"10 - Bouira","ship":600}, {"id":11,"name":"11 - Tamanrasset","ship":1500}, {"id":12,"name":"12 - TÃ©bessa","ship":600},
    {"id":13,"name":"13 - Tlemcen","ship":600}, {"id":14,"name":"14 - Tiaret","ship":600}, {"id":15,"name":"15 - Tizi Ouzou","ship":600},
    {"id":16,"name":"16 - Alger","ship":500}, {"id":17,"name":"17 - Djelfa","ship":700}, {"id":18,"name":"18 - Jijel","ship":500},
    {"id":19,"name":"19 - SÃ©tif","ship":500}, {"id":20,"name":"20 - SaÃ¯da","ship":600}, {"id":21,"name":"21 - Skikda","ship":500},
    {"id":22,"name":"22 - Sidi Bel AbbÃ¨s","ship":500}, {"id":23,"name":"23 - Annaba","ship":600}, {"id":24,"name":"24 - Guelma","ship":500},
    {"id":25,"name":"25 - Constantine","ship":200}, {"id":26,"name":"26 - MÃ©dÃ©a","ship":600}, {"id":27,"name":"27 - Mostaganem","ship":500},
    {"id":28,"name":"28 - M'Sila","ship":600}, {"id":29,"name":"29 - Mascara","ship":500}, {"id":30,"name":"30 - Ouargla","ship":500},
    {"id":31,"name":"31 - Oran","ship":500}, {"id":32,"name":"32 - El Bayadh","ship":600}, {"id":33,"name":"33 - Illizi","ship":2000},
    {"id":34,"name":"34 - Bordj Bou Arreridj","ship":500}, {"id":35,"name":"35 - BoumerdÃ¨s","ship":500}, {"id":36,"name":"36 - El Tarf","ship":500},
    {"id":37,"name":"37 - Tindouf","ship":1900}, {"id":38,"name":"38 - Tissemsilt","ship":500}, {"id":39,"name":"39 - El Oued","ship":600},
    {"id":40,"name":"40 - Khenchela","ship":500}, {"id":41,"name":"41 - Souk Ahras","ship":500}, {"id":42,"name":"42 - Tipaza","ship":600},
    {"id":43,"name":"43 - Mila","ship":500}, {"id":44,"name":"44 - AÃ¯n Defla","ship":600}, {"id":45,"name":"45 - NaÃ¢ma","ship":600},
    {"id":46,"name":"46 - AÃ¯n TÃ©mouchent","ship":600}, {"id":47,"name":"47 - GhardaÃ¯a","ship":500}, {"id":48,"name":"48 - Relizane","ship":600},
    {"id":49,"name":"49 - Timimoun","ship":1000}, {"id":50,"name":"50 - Bordj Badji Mokhtar","ship":1400}, {"id":51,"name":"51 - Ouled Djellal","ship":500},
    {"id":52,"name":"52 - BÃ©ni AbbÃ¨s","ship":700}, {"id":53,"name":"53 - In Salah","ship":1400}, {"id":54,"name":"54 - In Guezzam","ship":1400},
    {"id":55,"name":"55 - Touggourt","ship":700}, {"id":56,"name":"56 - Djanet","ship":1400}, {"id":57,"name":"57 - El Meghaier","ship":600},
    {"id":58,"name":"58 - El Menia","ship":600}
  ]
}
</script>
<script>
(() => {
  // Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ù…Ø®ØªØµØ±Ø©
  const $  = (s,p=document)=>p.querySelector(s);
  const $$ = (s,p=document)=>[...p.querySelectorAll(s)];
  const fmt = (n)=> new Intl.NumberFormat('fr-DZ').format(Number(n)||0);

  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±
  const data = JSON.parse($('#storeData').textContent);
  $('#year').textContent = new Date().getFullYear();

  // Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø±Ø£Ø³
  const waHeader = $('#waHeader');
  waHeader.href = `https://wa.me/${data.whatsapp_intl}`;

  /* ===================== Ø§Ù„Ù…Ø¹Ø±Ø¶ ===================== */
  const thumbs = $('#thumbs');
  const mainImg = $('#mainImg');
  thumbs.innerHTML = '';
  data.images.forEach((src,i)=>{
    const b = document.createElement('button');
    b.type='button'; b.className='thumb'+(i===0?' active':''); b.setAttribute('role','listitem'); b.setAttribute('aria-label',`ØµÙˆØ±Ø© ${i+1}`);
    b.innerHTML = `<img src="${src}" alt="ØµÙˆØ±Ø© ${i+1} Ù„Ù„Ù…Ù†ØªØ¬" loading="lazy">`;
    b.addEventListener('click',()=>{
      $$('.thumb').forEach(x=>x.classList.remove('active')); b.classList.add('active'); mainImg.src=src;
    });
    thumbs.appendChild(b);
  });
  if (data.images[0]) mainImg.src = data.images[0];

  /* ===================== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø± ===================== */
  // Ù†Ø¬Ø¹Ù„Ù‡Ø§ Ø¹Ù„Ù‰ window Ù„ÙŠØ³ØªØ¹Ù…Ù„Ù‡Ø§ Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø£ÙŠØ¶Ø§Ù‹
  window.selected = data.variants?.[1] || data.variants?.[0]; // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ: Ù…Ø®ØµØµØ© Ø¥Ù† ÙˆØ¬Ø¯Øª

  const variantsWrap = $('#variants');
  const pNow = $('#pNow'); const pWas = $('#pWas');
  const sVar = $('#sVar'); const sCard = $('#sCard'); const sTotal = $('#sTotal'); const sShip = $('#sShip');
  const qty = $('#qty'); const qtyMinus=$('#minus'); const qtyPlus=$('#plus'); const wilaya = $('#wilaya');

  function renderVariants(){
    variantsWrap.innerHTML='';
    (data.variants||[]).forEach(v=>{
      const el = document.createElement('button');
      el.type='button'; el.className='vbtn'+(v.id===window.selected.id?' active':''); el.textContent=v.name; el.setAttribute('aria-pressed', v.id===window.selected.id);
      el.addEventListener('click',()=>{window.selected=v; updatePrices(); renderVariants();});
      variantsWrap.appendChild(el);
    });
    sVar.textContent = window.selected?.name || 'â€”';
  }
  function updatePrices(){
    if(!window.selected){ pNow.textContent='â€” DA'; pWas.textContent='â€” DA'; return; }
    pNow.textContent = fmt(window.selected.final)+' DA';
    pWas.textContent = 'Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ… '+fmt(window.selected.price)+' DA';
    updateSummary();
  }

  // Wilayas
  (data.wilayas||[]).forEach(w=>{ const o=new Option(w.name,w.id); o.dataset.ship=w.ship; wilaya.add(o); });
  function currentShip(){ const opt = wilaya.options[wilaya.selectedIndex]; return Number(opt?.dataset.ship||0); }

  function setQty(v){ const n=Math.max(1,parseInt(v||'1',10)||1); qty.value=n; updateSummary(); }
  qtyMinus.addEventListener('click',()=>setQty(+qty.value-1));
  qtyPlus.addEventListener('click',()=>setQty(+qty.value+1));
  qty.addEventListener('input',()=>setQty(qty.value));
  wilaya.addEventListener('change',updateSummary);

  function updateSummary(){
    const q=Math.max(1,parseInt(qty.value,10)||1);
    const card = (window.selected?.final||0)*q; const ship=currentShip();
    $('#sQty').textContent = q; sCard.textContent = fmt(card)+' DA'; sShip.textContent = ship? fmt(ship)+' DA':'â€” DA'; sTotal.textContent = fmt(card+ship)+' DA';
  }

  renderVariants(); updatePrices(); setQty(1);

  /* ===================== ÙˆØ§ØªØ³Ø§Ø¨ + ØªØ­Ù‚Ù‚ ÙÙˆØ±Ù… ===================== */
  function buildMessage(){
    const name = $('#fname').value.trim();
    const phone = $('#phone').value.trim();
    const wTxt = wilaya.value ? wilaya.options[wilaya.selectedIndex].text : '';
    const commune = $('#commune')?.value.trim();
    const shipCo = ($('#shipCo')?.value === 'yalidine') ? 'Yalidine' : 'Other';

    const q = Math.max(1,parseInt(qty.value,10)||1);
    const card = (window.selected?.final||0)*q; const ship=currentShip();
    const note = $('#note').value.trim();

    const lines = [
      `ğŸ‘‹ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…ØªØ¬Ø± ${data.brand}`,
      `â€¢ Ø§Ù„Ù…Ù†ØªØ¬: Ø¨Ø·Ø§Ù‚Ø© NFC â€” ${window.selected?.name||''}`,
      `â€¢ Ø§Ù„ÙƒÙ…ÙŠØ©: ${q}`,
      `â€¢ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${fmt(card)} DA`,
      ship? `â€¢ Ø§Ù„Ø´Ø­Ù† (${wTxt}): ${fmt(ship)} DA` : `â€¢ Ø§Ù„Ø´Ø­Ù†: Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙˆÙ„Ø§ÙŠØ©`,
      `â€¢ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${fmt(card+ship)} DA`,
      name? `â€¢ Ø§Ù„Ø¥Ø³Ù…: ${name}`:'',
      phone? `â€¢ Ù‡Ø§ØªÙ: ${phone}`:'',
      wTxt? `â€¢ Ø§Ù„ÙˆÙ„Ø§ÙŠØ©: ${wTxt}`:'',
      commune? `â€¢ Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©: ${commune}`:'',
      `â€¢ Ø§Ù„Ø´Ø­Ù† Ø¹Ø¨Ø±: ${shipCo}`,
      note? `â€¢ Ù…Ù„Ø§Ø­Ø¸Ø©: ${note}`:''
    ].filter(Boolean).join('\n');
    return encodeURIComponent(lines);
  }

  const waBtn = $('#waBtn');
  function updateWaHref(){ waBtn.href = `https://wa.me/${data.whatsapp_intl}?text=${buildMessage()}`; }
  ['input','change'].forEach(ev=> $('#waForm').addEventListener(ev, updateWaHref));
  updateWaHref();

  // ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø­Ø³Ø¨ ØµØ­Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  function validateForm(){
    const ok = $('#fname').value.trim().length>2 && /^0[5-7][0-9]{8}$/.test($('#phone').value.trim()) && !!wilaya.value;
    waBtn.setAttribute('aria-disabled', ok? 'false':'true');
    waBtn.style.opacity = ok? '1':'0.6';
    waBtn.style.pointerEvents = ok? 'auto':'none';
  }
  ['input','change'].forEach(ev=> $('#waForm').addEventListener(ev, validateForm));
  validateForm();

  /* ===================== Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ===================== */
  const toast = $('#toast');
  $('#copyLink').addEventListener('click', async ()=>{
    try{ await navigator.clipboard.writeText(location.href); toast.textContent='ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· âœ…'; }
    catch{ toast.textContent='ØªØ¹Ø°Ø± Ø§Ù„Ù†Ø³Ø®'; }
    toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),1800);
  });

  /* ===================== Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ÙŠØ© Ù…Ø­Ù„ÙŠØ§Ù‹ ===================== */
  const KEY='tecno_card_orders';
  const loadOrders = () => { try{return JSON.parse(localStorage.getItem(KEY)||'[]')}catch{return[]} };
  const saveOrders = (arr) => localStorage.setItem(KEY, JSON.stringify(arr));
  window.loadOrders = loadOrders; // Ù…ØªØ§Ø­ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©

  function num(t){ const m=(''+(t??'')).replace(/[^\d.\-]/g,''); return Number(m)||0; }
  function buildOrderFromDOM(){
    const qEl = $('#qty');
    const q   = qEl ? Math.max(1, parseInt(qEl.value||'1',10)||1) : num($('#sQty')?.textContent||1);

    const priceUnit = (window.selected?.final) ?? num($('#pNow')?.textContent);
    const subTotal  = priceUnit * q;
    const shipVal   = num($('#sShip')?.textContent||'');
    const totalVal  = subTotal + shipVal;

    const wilSel = $('#wilaya');
    const wilaya_code = wilSel?.value || '';
    const wilaya_name = wilSel?.options?.[wilSel.selectedIndex]?.text || '';
    const communeVal  = $('#commune')?.value || '';

    const variantName = (window.selected?.name) || $('#sVar')?.textContent || 'Ø¨Ø·Ø§Ù‚Ø© NFC';

    return {
      timestamp: new Date().toISOString(),
      variant_id: window.selected?.id || '',
      variant_name: variantName,
      quantity: q,
      price_unit: priceUnit,
      price_subtotal: subTotal,
      shipping_company: ($('#shipCo')?.value==='yalidine') ? 'Yalidine' : ($('#shipCo')? 'Other' : ''),
      shipping_price: shipVal,
      total: totalVal,
      name: $('#fname')?.value?.trim() || '',
      phone: $('#phone')?.value?.trim() || '',
      wilaya_code,
      wilaya_name,
      commune: communeVal,
      note: $('#note')?.value?.trim() || ''
    };
  }

  /* ===================== Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ± Ù‚Ø¨Ù„ ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ ===================== */
  async function sendToServerBeforeWhatsApp(){
    const q = Math.max(1, parseInt($('#qty').value || '1', 10) || 1);
    const priceUnit = (window.selected?.final) || 0;
    const subTotal = priceUnit * q;

    const opt = $('#wilaya').options[$('#wilaya').selectedIndex];
    const ship = Number(opt?.dataset.ship || 0);
    const total = subTotal + ship;

    const payload = {
      name: $('#fname').value.trim(),
      phone: $('#phone').value.trim(),
      wilaya: $('#wilaya').value,
      commune: $('#commune').value.trim(),
      variant: window.selected?.name || 'Carte NFC',
      quantity: q,
      note: $('#note').value.trim(),
      price_total: total,      // COD
      declared_value: total    // Ù„Ø¶Ù…Ø§Ù† Ø­Ø³Ø§Ø¨ COD Ø¹Ù„Ù‰ Ø§Ù„Ø£ÙƒØ¨Ø±
    };

    try{
      const res = await fetch('/api/create_parcel.php', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      const out = await res.json();
      if(out.ok){
        toast.textContent = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø­Ù†Ø© âœ… ' + (out.tracking ? ('['+out.tracking+']') : '');
      }else{
        toast.textContent = 'ØªØ¹Ø°Ù‘Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø­Ù†Ø©ØŒ Ø³ÙŠÙØ±Ø³Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ ÙÙ‚Ø·';
        console.warn('Yalidine API error', out);
      }
    }catch(e){
      toast.textContent = 'Ù…Ø´ÙƒÙ„Ø© Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±';
      console.error(e);
    }
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), 2200);
  }

  // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨: Ø£Ø±Ø³Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ± Ø«Ù… Ø®Ø²Ù‘Ù† Ù…Ø­Ù„ÙŠÙ‹Ø§ØŒ Ø«Ù… Ø§ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ø·Ø¨ÙŠØ¹ÙŠ
  const waBtnEl = waBtn; // Ù…Ø±Ø¬Ø¹
  if (waBtnEl){
    waBtnEl.addEventListener('click', async () => {
      await sendToServerBeforeWhatsApp();

      // Ø­ÙØ¸ Ù…Ø­Ù„ÙŠ
      const arr = loadOrders();
      arr.push(buildOrderFromDOM());
      saveOrders(arr);
      // Ù„Ø§ Ù†Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ: Ø³ÙŠÙØªØ­ Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨
    }, {capture:true});
  }

  /* ===================== Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Ù…Ø®ÙÙŠ) ===================== */
  const adminBar = $('#adminBar');
  const exportBtn = $('#exportBtn');
  const clearBtn = $('#clearBtn');

  function revealAdminBar(){ adminBar.style.display='flex'; }

  // 1) Ø¹Ø¨Ø± Ù…Ø¹Ø§Ù…Ù„ ?admin=1 ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·
  const url = new URL(location.href);
  if(url.searchParams.get('admin')==='1'){ revealAdminBar(); }

  // 2) Ø§Ø®ØªØµØ§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­: Ctrl + Shift + X
  document.addEventListener('keydown', (e)=>{
    if(e.ctrlKey && e.shiftKey && (e.key==='x' || e.key==='X')){ revealAdminBar(); }
  });

  // ØªØµØ¯ÙŠØ± CSV
  function toCSV(rows){
    const headers = Object.keys(rows[0]||{
      timestamp:'',variant_id:'',variant_name:'',quantity:'',price_unit:'',price_subtotal:'',shipping_company:'',shipping_price:'',total:'',name:'',phone:'',wilaya_code:'',wilaya_name:'',commune:'',note:''
    });
    const esc = (v)=>`"${String(v??'').replace(/"/g,'""')}"`;
    const lines = [headers.join(',')].concat(rows.map(r=>headers.map(h=>esc(r[h])).join(',')));
    return '\\ufeff'+lines.join('\\n'); // BOM Ù„ÙŠØ¯Ø¹Ù… Excel
  }

  exportBtn?.addEventListener('click',()=>{
    const rows = loadOrders();
    if(!rows.length){ toast.textContent='Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨ÙŠØ§Øª Ø¨Ø¹Ø¯'; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),1500); return; }
    const csv = toCSV(rows);
    const blob = new Blob([csv],{type:'text/csv;charset=utf-8;'});
    const a = document.createElement('a');
    const d = new Date();
    const y = d.getFullYear(); const m = String(d.getMonth()+1).padStart(2,'0'); const dd = String(d.getDate()).padStart(2,'0');
    a.href = URL.createObjectURL(blob);
    a.download = `orders_${y}-${m}-${dd}.csv`;
    document.body.appendChild(a); a.click(); a.remove();
  });

  clearBtn?.addEventListener('click',()=>{
    if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²ØŸ')){
      localStorage.removeItem(KEY);
      toast.textContent='ØªÙ… Ø§Ù„Ù…Ø³Ø­'; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),1200);
    }
  });
})();
</script>

<!-- Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙÙ‡ÙŠÙƒÙ„Ø© Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø³ÙŠÙˆ -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "Ø¨Ø·Ø§Ù‚Ø© NFC",
  "brand": {"@type":"Brand","name":"TECNO CARD"},
  "description": "Ø¨Ø·Ø§Ù‚Ø© NFC Ø°ÙƒÙŠØ© Ù…Ø¹ Ø±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ø¨Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ØŒ ØªÙˆØµÙŠÙ„ Ù„ÙƒÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª ÙˆØ§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø³ØªÙ„Ø§Ù….",
  "offers": {
    "@type": "Offer",
    "priceCurrency": "DZD",
    "price": "2800",
    "availability": "https://schema.org/InStock"
  }
}
</script>
</body>
</html>
